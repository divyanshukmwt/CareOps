{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/01.%20frontend/frontend%20domination/CareOps/frontend/app/app/bookings/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function BookingsPage() {\r\n  const [bookings, setBookings] = useState([]);\r\n  const [selectedBooking, setSelectedBooking] = useState(null);\r\n  const [forms, setForms] = useState([]);\r\n\r\n  const loadBookings = async () => {\r\n    const res = await fetch(\"http://localhost:4000/api/bookings\", {\r\n      credentials: \"include\",\r\n    });\r\n    const data = await res.json();\r\n    setBookings(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadBookings();\r\n  }, []);\r\n\r\n  const updateStatus = async (bookingId, status) => {\r\n    await fetch(\r\n      `http://localhost:4000/api/bookings/${bookingId}/status`,\r\n      {\r\n        method: \"PATCH\",\r\n        credentials: \"include\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ status }),\r\n      }\r\n    );\r\n    loadBookings();\r\n  };\r\n\r\n  const viewForms = async (booking) => {\r\n    setSelectedBooking(booking);\r\n\r\n    const res = await fetch(\r\n      `http://localhost:4000/api/bookings/${booking._id}/forms`,\r\n      { credentials: \"include\" }\r\n    );\r\n    const data = await res.json();\r\n    setForms(data);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Bookings</h1>\r\n\r\n      <table border=\"1\" cellPadding=\"8\" width=\"100%\">\r\n        <thead>\r\n          <tr>\r\n            <th>Customer</th>\r\n            <th>Service</th>\r\n            <th>Date</th>\r\n            <th>Status</th>\r\n            <th>Forms</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          {bookings.map((b) => (\r\n            <tr key={b._id}>\r\n              <td>{b.contactId?.name}</td>\r\n              <td>{b.serviceName}</td>\r\n              <td>{new Date(b.scheduledAt).toLocaleString()}</td>\r\n              <td>{b.status}</td>\r\n              <td>\r\n                <button onClick={() => viewForms(b)}>View Forms</button>\r\n              </td>\r\n              <td>\r\n                <button onClick={() => updateStatus(b._id, \"COMPLETED\")}>\r\n                  Complete\r\n                </button>\r\n                <button onClick={() => updateStatus(b._id, \"NO_SHOW\")}>\r\n                  No-show\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* FORMS SECTION */}\r\n      {selectedBooking && (\r\n        <div style={{ marginTop: 30 }}>\r\n          <h2>Forms for Booking</h2>\r\n\r\n          {forms.length === 0 ? (\r\n            <p>No forms linked</p>\r\n          ) : (\r\n            forms.map((f, i) => (\r\n              <div\r\n                key={i}\r\n                style={{\r\n                  border: \"1px solid #ccc\",\r\n                  padding: 10,\r\n                  marginBottom: 10,\r\n                }}\r\n              >\r\n                <strong>{f.formTitle}</strong>\r\n                <p>Status: {f.status}</p>\r\n\r\n                {f.status === \"COMPLETED\" && (\r\n                  <ul>\r\n                    {Object.entries(f.responses).map(([key, value]) => (\r\n                      <li key={key}>\r\n                        <strong>{key}:</strong> {String(value)}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAIe,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAErC,MAAM,eAAe;QACnB,MAAM,MAAM,MAAM,MAAM,sCAAsC;YAC5D,aAAa;QACf;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,YAAY;IACd;IAEA,IAAA,0KAAS;kCAAC;YACR;QACF;iCAAG,EAAE;IAEL,MAAM,eAAe,OAAO,WAAW;QACrC,MAAM,MACJ,CAAC,mCAAmC,EAAE,UAAU,OAAO,CAAC,EACxD;YACE,QAAQ;YACR,aAAa;YACb,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAO;QAChC;QAEF;IACF;IAEA,MAAM,YAAY,OAAO;QACvB,mBAAmB;QAEnB,MAAM,MAAM,MAAM,MAChB,CAAC,mCAAmC,EAAE,QAAQ,GAAG,CAAC,MAAM,CAAC,EACzD;YAAE,aAAa;QAAU;QAE3B,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,SAAS;IACX;IAEA,qBACE,6LAAC;;0BACC,6LAAC;0BAAG;;;;;;0BAEJ,6LAAC;gBAAM,QAAO;gBAAI,aAAY;gBAAI,OAAM;;kCACtC,6LAAC;kCACC,cAAA,6LAAC;;8CACC,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;;;;;;;;;;;;kCAIR,6LAAC;kCACE,SAAS,GAAG,CAAC,CAAC,kBACb,6LAAC;;kDACC,6LAAC;kDAAI,EAAE,SAAS,EAAE;;;;;;kDAClB,6LAAC;kDAAI,EAAE,WAAW;;;;;;kDAClB,6LAAC;kDAAI,IAAI,KAAK,EAAE,WAAW,EAAE,cAAc;;;;;;kDAC3C,6LAAC;kDAAI,EAAE,MAAM;;;;;;kDACb,6LAAC;kDACC,cAAA,6LAAC;4CAAO,SAAS,IAAM,UAAU;sDAAI;;;;;;;;;;;kDAEvC,6LAAC;;0DACC,6LAAC;gDAAO,SAAS,IAAM,aAAa,EAAE,GAAG,EAAE;0DAAc;;;;;;0DAGzD,6LAAC;gDAAO,SAAS,IAAM,aAAa,EAAE,GAAG,EAAE;0DAAY;;;;;;;;;;;;;+BAZlD,EAAE,GAAG;;;;;;;;;;;;;;;;YAsBnB,iCACC,6LAAC;gBAAI,OAAO;oBAAE,WAAW;gBAAG;;kCAC1B,6LAAC;kCAAG;;;;;;oBAEH,MAAM,MAAM,KAAK,kBAChB,6LAAC;kCAAE;;;;;+BAEH,MAAM,GAAG,CAAC,CAAC,GAAG,kBACZ,6LAAC;4BAEC,OAAO;gCACL,QAAQ;gCACR,SAAS;gCACT,cAAc;4BAChB;;8CAEA,6LAAC;8CAAQ,EAAE,SAAS;;;;;;8CACpB,6LAAC;;wCAAE;wCAAS,EAAE,MAAM;;;;;;;gCAEnB,EAAE,MAAM,KAAK,6BACZ,6LAAC;8CACE,OAAO,OAAO,CAAC,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBAC5C,6LAAC;;8DACC,6LAAC;;wDAAQ;wDAAI;;;;;;;gDAAU;gDAAE,OAAO;;2CADzB;;;;;;;;;;;2BAbV;;;;;;;;;;;;;;;;;AA0BrB;GApHwB;KAAA"}}]
}